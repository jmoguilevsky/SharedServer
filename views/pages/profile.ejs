<!DOCTYPE html>
<html ng-app="userApp">

<header>

  <% include ../partials/header.ejs %>
  <link rel="stylesheet" type="text/css" href="/public/stylesheets/main.css" />
  <script src="/controllers/profilecontroller.js"></script>

</header>

<body ng-controller="ProfileController">

  <div class="container">
    <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 col-xs-offset-0 col-sm-offset-0 col-md-offset-3 col-lg-offset-3">
      <div class="card">
        <div class="card-header">
          <h3 class="card-title">{{ user.name }}</h3>
        </div>
        <div class="card-block">
          <form class="form-signin" ng-submit="editUser()" >
            <div class="row">
              <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <figure class="figure">
                  <img alt="User Pic" width="450" src="{{ 'data:image; base64,' + user.photo_profile }}" class="figure-img img-fluid"> 
                  <figcaption class="figure-caption" id="fileInput" style="visibility: hidden;">
                    <label class="file">
                      <input type="file" ng-model="user.photo_profile" onload="onload" base-sixty-four-input>
                      <span class="file-custom"></span>
                    </label>
                  </figcaption>
                </figure>
              </div>
            </div>
            <div class="row">
              <div class=" col-xs-12 col-sm-12 col-md-12 col-lg-12"> 

                <table class="table table-user-information">
                  <tbody>
                    <tr>
                      <td >Email</td>
                      <td>
                        <input type="text" readonly="readonly" class="form-control"  id="inputEmail" placeholder="Email" ng-model="user.email">
                      </td>
                    </tr>
                    <tr>
                      <td style="vertical-align: middle">Name</td>
                      <td>
                        <input type="text" readonly="readonly" class="form-control editable"  id="inputName" placeholder="Name" ng-model="user.name" required >
                      </td>
                    </tr>
                    <tr>
                      <td style="vertical-align: middle">Alias</td>
                      <td>
                        <input type="text" readonly="readonly" class="form-control editable"  id="inputAlias" placeholder="Alias" ng-model="user.alias" required >
                      </td>
                    </tr>
                    <tr>
                      <td style="vertical-align: middle" > Sex </td>
                      <td >
                        <input type="text" readonly="readonly" class="form-control editable"  id="inputSex" placeholder="Sex" ng-model="user.sex" required >
                      </td>
                    </tr>
                  </tbody>
                </table>  

              </div>
            </div>
            <div class="row">
              <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"> 
                <table class="table">
                  <thead class="thead-default">
                    <tr>
                      <th> </th>
                      <th>Category</th>
                      <th>Value</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr ng-repeat="interest in user.interests">
                      <th scope="row" style="visibility: hidden;">
                        <a href="#" ng-click="removeInterest($index)" class="pull-xs-left btn btn-sm btn-danger">
                          Remove
                        </a>
                      </th>
                      <td>{{ interest.category }}</td>
                      <td>{{ interest.value }}</td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <a href="#" class="btn btn-primary">Add interest</a>
            </div>
            <div class="row" style="margin-top: 2%;margin-bottom: 2%">
              <button class="value-input btn btn-lg btn-primary btn-block" id="btnSubmit" type="submit" >Save changes</button>
              <button class="value-input btn btn-lg btn-primary btn-block" id="btnCancel" ng-click="cancelEdit()" >Cancel changes</button>
            </div>
          </form>
        </div>
        <div class="card-footer">
          <a href="#" id="editUser" data-original-title="Edit this user" title="Edit this user" data-toggle="tooltip" type="button" class="btn btn-sm btn-warning">
            <span class="octicon octicon-pencil"></span>
          </a>
          <a data-original-title="Remove this user" title="Remove this user" data-toggle="tooltip" type="button" class="btn btn-sm btn-danger">
            <span class="octicon octicon-x"></span>
          </a>
        </div>
      </div>
    </div>

  </div> <!-- /container -->
</body>

<script type="text/javascript">
  $("#editUser").click(function () {
    $("#btnSubmit").show();
    $("#btnCancel").show();
    $("form table tr td input.editable").prop('readonly','');
    $("table tbody th").prop('style','');
    $("#fileInput").prop('style','');
  });
  $("#btnCancel").click(function () {
    $("#btnSubmit").hide();
    $("#btnCancel").hide();
    $("form table tr td input.editable").prop('readonly','readonly');
    $("table tbody th").prop('style','visibility: hidden;');
    $("#fileInput").prop('style','visibility: hidden;');
  });
  $(function () {
    $("#btnSubmit").hide();
    $("#btnCancel").hide();
  })
</script>

</html>